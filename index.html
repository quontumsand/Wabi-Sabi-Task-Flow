<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com; font-src 'self' data:; img-src 'self' data: blob:; connect-src 'self' https:;">
    <title>Wabi-Sabi Task Flow</title>
    
    <!-- React 18 -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.3s ease-out'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px) rotate(0deg)' },
                            '33%': { transform: 'translateY(-10px) rotate(2deg)' },
                            '66%': { transform: 'translateY(5px) rotate(-1deg)' }
                        },
                        fadeIn: {
                            'from': { opacity: '0', transform: 'translateY(10px)' },
                            'to': { opacity: '1', transform: 'translateY(0)' }
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #fef7ed 0%, #fed7aa 30%, #fecaca 70%, #fde68a 100%);
            user-select: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        #root {
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(245, 158, 11, 0.1);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(245, 158, 11, 0.3);
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(245, 158, 11, 0.5);
        }
        
        /* Smooth transitions */
        * {
            transition: opacity 0.2s ease, transform 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;
        }
        
        /* Focus styles for accessibility */
        button:focus-visible,
        input:focus-visible {
            outline: 2px solid #f59e0b;
            outline-offset: 2px;
            border-radius: 4px;
        }
        
        /* Button hover effects */
        .wabi-button {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 500;
            padding: 8px 16px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .wabi-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .wabi-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Input field styles */
        .wabi-input {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 16px;
            transition: all 0.2s ease;
            width: 100%;
        }
        
        .wabi-input:focus {
            background: rgba(255, 255, 255, 0.7);
            border-color: rgba(245, 158, 11, 0.6);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
        }
        
        .wabi-input::placeholder {
            color: rgba(146, 64, 14, 0.7);
        }
        
        /* Task card animations */
        .task-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .task-card:hover {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        /* Glass morphism effects */
        .glass {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        /* Loading animation */
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Particle effects */
        .particle {
            position: absolute;
            pointer-events: none;
            opacity: 0.6;
            animation: float 8s ease-in-out infinite;
        }
        
        /* Age indicators */
        .age-fresh { 
            background: linear-gradient(45deg, #10b981, #34d399);
            box-shadow: 0 0 6px rgba(16, 185, 129, 0.4);
        }
        
        .age-settling { 
            background: linear-gradient(45deg, #f59e0b, #fbbf24);
            box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
        }
        
        .age-aged { 
            background: linear-gradient(45deg, #ef4444, #f87171);
            box-shadow: 0 0 6px rgba(239, 68, 68, 0.4);
        }
        
        /* Wisdom box special styling */
        .wisdom-box {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1));
            backdrop-filter: blur(12px);
            border: 1px solid rgba(245, 158, 11, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .wisdom-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }
            
            .task-card {
                margin: 2px 0;
            }
            
            #root {
                padding: 16px;
            }
        }
        
        /* Print styles */
        @media print {
            body {
                background: white !important;
            }
            
            .no-print {
                display: none !important;
            }
            
            .task-card {
                break-inside: avoid;
                margin-bottom: 8px;
            }
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #1f2937 0%, #374151 30%, #4b5563 70%, #6b7280 100%);
            }
        }
        
        /* Accessibility improvements */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Selection styling */
        ::selection {
            background: rgba(245, 158, 11, 0.3);
            color: #92400e;
        }
        
        ::-moz-selection {
            background: rgba(245, 158, 11, 0.3);
            color: #92400e;
        }
    </style>
</head>
<body>
    <div id="root">
        <div style="
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            flex-direction: column;
            color: #92400e;
            text-align: center;
        ">
            <div style="
                font-size: 48px;
                margin-bottom: 16px;
                animation: float 2s ease-in-out infinite;
            ">‰æòÂØÇ</div>
            <div style="
                font-size: 24px;
                font-weight: 300;
                margin-bottom: 8px;
            ">Wabi-Sabi Task Flow</div>
            <div style="
                font-size: 16px;
                opacity: 0.8;
                margin-bottom: 24px;
            ">Loading the beauty of imperfection...</div>
            <div class="loading-spinner" style="
                width: 32px;
                height: 32px;
                border: 3px solid rgba(245, 158, 11, 0.3);
                border-top: 3px solid #f59e0b;
                border-radius: 50%;
            "></div>
        </div>
    </div>
    
    <!-- Console logging for development -->
    <script>
        console.log('üå∏ Wabi-Sabi Task Flow - Starting...');
        console.log('React version:', React.version);
        console.log('ReactDOM available:', typeof ReactDOM !== 'undefined');
        console.log('Babel available:', typeof Babel !== 'undefined');
        
        // Error handling
        window.addEventListener('error', (e) => {
            console.error('üö® Global Error:', e.error);
        });
        
        // Unhandled promise rejections
        window.addEventListener('unhandledrejection', (e) => {
            console.error('üö® Unhandled Promise Rejection:', e.reason);
        });
    </script>
    
    <!-- Load the React app -->
    <script type="text/babel">
        console.log('üöÄ Loading React application...');
        
        const { useState, useEffect, useRef, useCallback } = React;

        // Enhanced Icon component
        const Icon = ({ name, size = 20, className = "", style = {}, onClick = null }) => {
            const icons = {
                Plus: "‚ûï",
                Check: "‚úÖ", 
                X: "‚ùå",
                Leaf: "üçÉ",
                Wind: "üí®", 
                Waves: "üåä",
                Heart: "‚ù§Ô∏è",
                Trash2: "üóëÔ∏è",
                Clock: "üïê",
                Calendar: "üìÖ",
                Focus: "üéØ",
                Sparkles: "‚ú®",
                Settings: "‚öôÔ∏è",
                Download: "üíæ",
                Upload: "üìÅ",
                Pause: "‚è∏Ô∏è",
                Play: "‚ñ∂Ô∏è"
            };
            
            return React.createElement('span', {
                className: className + (onClick ? ' cursor-pointer' : ''),
                onClick: onClick,
                style: { 
                    fontSize: size + 'px',
                    display: 'inline-block',
                    width: size + 'px',
                    textAlign: 'center',
                    lineHeight: '1',
                    userSelect: 'none',
                    transition: 'transform 0.2s ease',
                    ...style
                },
                onMouseEnter: onClick ? (e) => e.target.style.transform = 'scale(1.1)' : null,
                onMouseLeave: onClick ? (e) => e.target.style.transform = 'scale(1)' : null
            }, icons[name] || "‚Ä¢");
        };

        // Floating particle component
        const FloatingParticle = ({ delay = 0, index = 0 }) => {
            const [position, setPosition] = useState({
                x: Math.random() * (window.innerWidth || 800),
                y: Math.random() * (window.innerHeight || 600)
            });

            useEffect(() => {
                const moveParticle = () => {
                    setPosition(prev => ({
                        x: (prev.x + (Math.random() - 0.5) * 3) % (window.innerWidth || 800),
                        y: (prev.y + (Math.random() - 0.5) * 3) % (window.innerHeight || 600)
                    }));
                };

                const interval = setInterval(moveParticle, 4000 + delay * 1000);
                return () => clearInterval(interval);
            }, [delay]);

            return React.createElement('div', {
                style: {
                    position: 'absolute',
                    left: position.x + 'px',
                    top: position.y + 'px',
                    width: '3px',
                    height: '3px',
                    background: `radial-gradient(circle, rgba(245,158,11,${0.4 + Math.sin(index) * 0.2}) 0%, transparent 70%)`,
                    borderRadius: '50%',
                    pointerEvents: 'none',
                    zIndex: 1,
                    transition: 'all 4s ease-in-out'
                }
            });
        };

        // Main application component
        const WabiSabiTaskFlow = () => {
            const [tasks, setTasks] = useState([]);
            const [newTask, setNewTask] = useState('');
            const [focus, setFocus] = useState(null);
            const [timeElapsed, setTimeElapsed] = useState(0);
            const [completedToday, setCompletedToday] = useState(0);
            const [wisdom, setWisdom] = useState('Perfect is the enemy of done');
            const [showSettings, setShowSettings] = useState(false);
            const inputRef = useRef(null);

            // Wabi-sabi wisdom collection
            const wabiSabiWisdom = [
                "Perfect is the enemy of done",
                "Progress, not perfection", 
                "Honor what you've accomplished",
                "Rest is productive too",
                "Small steps create long journeys",
                "Incomplete is not inadequate",
                "Every task has its season",
                "Gentle persistence over force",
                "Value the attempt, not just the result",
                "Some things are meant to be left undone",
                "Beauty lies in the imperfect",
                "Embrace the natural rhythm of work",
                "Cracks let the light in",
                "Weathered wood tells stories",
                "Asymmetry creates harmony",
                "The journey matters more than the destination",
                "Embrace the beautiful mess of productivity",
                "Sometimes the most important work is invisible",
                "Growth happens in the spaces between tasks"
            ];

            // Initialize data on mount
            useEffect(() => {
                loadTasks();
                loadCompletedCount();
                setRandomWisdom();
                
                // Keyboard shortcuts
                const handleKeyPress = (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch(e.key) {
                            case 'n':
                                e.preventDefault();
                                inputRef.current?.focus();
                                break;
                            case 'f':
                                e.preventDefault();
                                startFocusOnFirstTask();
                                break;
                            case 'e':
                                e.preventDefault();
                                endFocus();
                                break;
                        }
                    }
                };
                
                document.addEventListener('keydown', handleKeyPress);
                return () => document.removeEventListener('keydown', handleKeyPress);
            }, []);

            const loadTasks = () => {
                const saved = localStorage.getItem('wabi-sabi-tasks');
                if (saved) {
                    try {
                        setTasks(JSON.parse(saved));
                    } catch (error) {
                        console.error('Failed to load tasks:', error);
                    }
                }
            };

            const loadCompletedCount = () => {
                const today = new Date().toDateString();
                const completedKey = `completed-${today}`;
                setCompletedToday(parseInt(localStorage.getItem(completedKey) || '0'));
            };

            const setRandomWisdom = () => {
                const randomWisdom = wabiSabiWisdom[Math.floor(Math.random() * wabiSabiWisdom.length)];
                setWisdom(randomWisdom);
            };

            // Save tasks whenever they change
            useEffect(() => {
                localStorage.setItem('wabi-sabi-tasks', JSON.stringify(tasks));
            }, [tasks]);

            // Focus timer
            useEffect(() => {
                let interval;
                if (focus) {
                    interval = setInterval(() => {
                        setTimeElapsed(prev => prev + 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [focus]);

            const addTask = useCallback(() => {
                if (!newTask.trim()) return;
                
                const task = {
                    id: Date.now(),
                    text: newTask.trim(),
                    completed: false,
                    created: new Date().toISOString(),
                    energy: Math.random() * 100
                };
                
                setTasks(prev => [...prev, task]);
                setNewTask('');
                
                if (Math.random() < 0.3) {
                    setRandomWisdom();
                }
            }, [newTask]);

            const completeTask = useCallback((id) => {
                setTasks(prev => prev.map(task => 
                    task.id === id 
                        ? { 
                            ...task, 
                            completed: !task.completed, 
                            completedAt: task.completed ? null : new Date().toISOString() 
                        }
                        : task
                ));
                
                const taskToComplete = tasks.find(t => t.id === id);
                if (taskToComplete && !taskToComplete.completed) {
                    const today = new Date().toDateString();
                    const completedKey = `completed-${today}`;
                    const newCount = completedToday + 1;
                    setCompletedToday(newCount);
                    localStorage.setItem(completedKey, newCount.toString());
                }
                
                setRandomWisdom();
            }, [completedToday, tasks]);

            const deleteTask = useCallback((id) => {
                setTasks(prev => prev.filter(task => task.id !== id));
                if (focus && focus.id === id) {
                    setFocus(null);
                    setTimeElapsed(0);
                }
            }, [focus]);

            const startFocus = useCallback((task) => {
                setFocus(task);
                setTimeElapsed(0);
            }, []);

            const startFocusOnFirstTask = useCallback(() => {
                const incompleteTasks = tasks.filter(t => !t.completed);
                if (incompleteTasks.length > 0) {
                    startFocus(incompleteTasks[0]);
                }
            }, [tasks, startFocus]);

            const endFocus = useCallback(() => {
                setFocus(null);
                setTimeElapsed(0);
            }, []);

            const exportTasks = () => {
                const exportData = {
                    tasks,
                    exportDate: new Date().toISOString(),
                    version: '1.0.0'
                };
                
                const dataStr = JSON.stringify(exportData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = `wabi-sabi-tasks-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                
                setWisdom('Tasks exported - sharing wisdom is beautiful');
                setShowSettings(false);
            };

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            const getTaskAge = (task) => {
                const hours = (new Date() - new Date(task.created)) / (1000 * 60 * 60);
                if (hours < 24) return 'fresh';
                if (hours < 72) return 'settling';
                return 'aged';
            };

            const getTaskAgeColor = (age) => {
                switch(age) {
                    case 'fresh': return 'age-fresh';
                    case 'settling': return 'age-settling';
                    case 'aged': return 'age-aged';
                    default: return 'age-fresh';
                }
            };

            return React.createElement('div', {
                className: "min-h-screen relative overflow-hidden",
                style: {
                    background: 'linear-gradient(135deg, #fef7ed 0%, #fed7aa 30%, #fecaca 70%, #fde68a 100%)'
                }
            }, [
                // Floating particles
                ...Array(8).fill(null).map((_, i) => 
                    React.createElement(FloatingParticle, { key: `particle-${i}`, delay: i, index: i })
                ),
                
                // Main content
                React.createElement('div', {
                    key: 'main-content',
                    className: "relative z-10 max-w-5xl mx-auto p-6"
                }, [
                    // Header section
                    React.createElement('header', {
                        key: 'header',
                        className: "text-center mb-8"
                    }, [
                        React.createElement('div', {
                            key: 'title-container',
                            className: "flex items-center justify-center gap-4 mb-4"
                        }, [
                            React.createElement('h1', {
                                key: 'title',
                                className: "text-5xl font-light text-amber-900 tracking-wide",
                                style: { fontFamily: 'serif' }
                            }, "‰æòÂØÇ Task Flow"),
                            React.createElement(Icon, {
                                key: 'settings-icon',
                                name: 'Settings',
                                size: 24,
                                className: 'text-amber-700 hover:text-amber-900 opacity-60 hover:opacity-100',
                                onClick: () => setShowSettings(!showSettings)
                            })
                        ]),
                        React.createElement('p', {
                            key: 'subtitle',
                            className: "text-amber-700 text-xl italic font-light mb-6"
                        }, "Embracing the imperfect journey of getting things done"),
                        
                        // Wisdom box
                        React.createElement('div', {
                            key: 'wisdom',
                            className: "wisdom-box p-6 rounded-xl border border-amber-200/50 mx-auto max-w-2xl cursor-pointer",
                            onClick: setRandomWisdom
                        }, [
                            React.createElement('p', {
                                key: 'wisdom-text',
                                className: "text-amber-800 italic text-lg leading-relaxed"
                            }, `"${wisdom}"`),
                            React.createElement('p', {
                                key: 'wisdom-hint',
                                className: "text-amber-600 text-sm mt-2 opacity-70"
                            }, "Click for new wisdom")
                        ])
                    ]),

                    // Stats dashboard
                    React.createElement('div', {
                        key: 'stats',
                        className: "grid grid-cols-3 gap-6 mb-8"
                    }, [
                        React.createElement('div', {
                            key: 'stat-completed',
                            className: "glass rounded-xl p-6 text-center hover:scale-105 transition-transform cursor-pointer"
                        }, [
                            React.createElement(Icon, {
                                key: 'heart-icon',
                                name: 'Heart',
                                size: 32,
                                className: 'mx-auto mb-3',
                                style: { color: '#be185d' }
                            }),
                            React.createElement('div', {
                                key: 'completed-count',
                                className: "text-3xl font-light text-amber-900 mb-1"
                            }, completedToday),
                            React.createElement('div', {
                                key: 'completed-label',
                                className: "text-amber-700 font-medium"
                            }, "Completed Today")
                        ]),
                        
                        React.createElement('div', {
                            key: 'stat-active',
                            className: "glass rounded-xl p-6 text-center hover:scale-105 transition-transform cursor-pointer"
                        }, [
                            React.createElement(Icon, {
                                key: 'leaf-icon',
                                name: 'Leaf',
                                size: 32,
                                className: 'mx-auto mb-3',
                                style: { color: '#059669' }
                            }),
                            React.createElement('div', {
                                key: 'active-count',
                                className: "text-3xl font-light text-amber-900 mb-1"
                            }, tasks.filter(t => !t.completed).length),
                            React.createElement('div', {
                                key: 'active-label',
                                className: "text-amber-700 font-medium"
                            }, "Active Tasks")
                        ]),
                        
                        React.createElement('div', {
                            key: 'stat-flow',
                            className: "glass rounded-xl p-6 text-center hover:scale-105 transition-transform cursor-pointer"
                        }, [
                            React.createElement(Icon, {
                                key: 'flow-icon',
                                name: focus ? 'Pause' : 'Wind',
                                size: 32,
                                className: 'mx-auto mb-3',
                                style: { color: '#0284c7' }
                            }),
                            React.createElement('div', {
                                key: 'flow-time',
                                className: "text-3xl font-light text-amber-900 mb-1",
                                style: { fontFamily: 'monospace' }
                            }, focus ? formatTime(timeElapsed) : '~'),
                            React.createElement('div', {
                                key: 'flow-label',
                                className: "text-amber-700 font-medium"
                            }, "Flow State")
                        ])
                    ]),

                    // Focus mode indicator
                    focus && React.createElement('div', {
                        key: 'focus-mode',
                        className: "mb-8 p-6 glass rounded-xl border border-amber-300/50 bg-gradient-to-r from-orange-200/60 to-amber-200/60"
                    }, React.createElement('div', {
                        className: "flex items-center justify-between"
                    }, [
                        React.createElement('div', { key: 'focus-info' }, [
                            React.createElement('div', {
                                key: 'focus-header',
                                className: "flex items-center gap-3 mb-2"
                            }, [
                                React.createElement(Icon, {
                                    key: 'focus-wave-icon',
                                    name: 'Waves',
                                    size: 24,
                                    style: { color: '#0284c7' }
                                }),
                                React.createElement('h3', {
                                    key: 'focus-title',
                                    className: "text-xl font-medium text-amber-900"
                                }, "Deep Flow State")
                            ]),
                            React.createElement('p', {
                                key: 'focus-task-text',
                                className: "text-amber-800 text-lg mb-1"
                            }, focus.text),
                            React.createElement('p', {
                                key: 'focus-duration',
                                className: "text-amber-700 font-mono"
                            }, `Duration: ${formatTime(timeElapsed)}`)
                        ]),
                        React.createElement('button', {
                            key: 'end-focus-btn',
                            onClick: endFocus,
                            className: "wabi-button px-6 py-3 text-lg"
                        }, [
                            React.createElement(Icon, { key: 'pause-icon', name: 'Pause', size: 20 }),
                            " End Flow"
                        ])
                    ])),

                    // Task input section
                    React.createElement('div', {
                        key: 'task-input-section',
                        className: "mb-8"
                    }, React.createElement('div', {
                        className: "flex gap-3"
                    }, [
                        React.createElement('input', {
                            key: 'task-input',
                            ref: inputRef,
                            type: "text",
                            value: newTask,
                            onChange: (e) => setNewTask(e.target.value),
                            onKeyPress: (e) => {
                                if (e.key === 'Enter') {
                                    addTask();
                                }
                            },
                            placeholder: "What wants to be done today?",
                            className: "wabi-input flex-1 text-lg"
                        }),
                        React.createElement('button', {
                            key: 'add-task-btn',
                            onClick: addTask,
                            className: "wabi-button px-8 py-3 text-lg font-medium"
                        }, [
                            React.createElement(Icon, { key: 'plus-icon', name: 'Plus', size: 22 }),
                            " Add Task"
                        ])
                    ])),

                    // Tasks list
                    React.createElement('div', {
                        key: 'tasks-container',
                        className: "space-y-4"
                    }, tasks.length === 0 ? 
                        // Empty state
                        React.createElement('div', {
                            key: 'empty-state',
                            className: "text-center py-16"
                        }, [
                            React.createElement(Icon, {
                                key: 'empty-leaf',
                                name: 'Leaf',
                                size: 64,
                                className: "mx-auto mb-6 opacity-60",
                                style: { color: '#f59e0b' }
                            }),
                            React.createElement('h3', {
                                key: 'empty-title',
                                className: "text-2xl font-light text-amber-800 mb-3"
                            }, "A blank canvas awaits"),
                            React.createElement('p', {
                                key: 'empty-subtitle',
                                className: "text-amber-600 text-lg"
                            }, "What would you like to nurture into being?"),
                            React.createElement('p', {
                                key: 'empty-hint',
                                className: "text-amber-500 text-sm mt-4"
                            }, "Press Ctrl+N to quickly add a new task")
                        ]) :
                        // Tasks list
                        tasks.map((task) => {
                            const age = getTaskAge(task);
                            const isCompleted = task.completed;
                            
                            return React.createElement('div', {
                                key: task.id,
                                className: `task-card group p-5 rounded-xl border transition-all duration-300 glass ${
                                    isCompleted ? 'opacity-70' : ''
                                }`,
                                style: {
                                    transform: `translateX(${Math.sin(task.energy) * 2}px) translateY(${Math.cos(task.energy) * 1}px) rotate(${(task.energy - 50) * 0.01}deg)`,
                                    borderColor: isCompleted ? '#10b981' : age === 'fresh' ? '#f59e0b' : age === 'settling' ? '#f97316' : '#ef4444'
                                }
                            }, React.createElement('div', {
                                className: "flex items-center gap-4"
                            }, [
                                // Completion checkbox
                                React.createElement('button', {
                                    key: 'complete-btn',
                                    onClick: () => completeTask(task.id),
                                    className: `w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all duration-200 ${
                                        isCompleted
                                            ? 'bg-green-500 border-green-500 text-white shadow-lg shadow-green-500/30'
                                            : 'border-amber-400 hover:border-amber-500 hover:bg-amber-50 hover:scale-110'
                                    }`
                                }, isCompleted && React.createElement(Icon, { name: 'Check', size: 16 })),
                                
                                // Task text
                                React.createElement('div', {
                                    key: 'task-content',
                                    className: "flex-1"
                                }, [
                                    React.createElement('span', {
                                        key: 'task-text',
                                        className: `text-lg ${isCompleted ? 'line-through text-amber-600' : 'text-amber-900'}`
                                    }, task.text),
                                    React.createElement('div', {
                                        key: 'task-meta',
                                        className: "text-sm text-amber-600 mt-1"
                                    }, `Created ${new Date(task.created).toLocaleDateString()} ‚Ä¢ ${age}`)
                                ]),
                                
                                // Action buttons
                                React.createElement('div', {
                                    key: 'task-actions',
                                    className: "flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity"
                                }, [
                                    !isCompleted && !focus && React.createElement('button', {
                                        key: 'focus-task-btn',
                                        onClick: () => startFocus(task),
                                        className: "p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",
                                        title: "Enter flow state"
                                    }, React.createElement(Icon, { name: 'Focus', size: 18 })),
                                    
                                    React.createElement('button', {
                                        key: 'delete-task-btn',
                                        onClick: () => deleteTask(task.id),
                                        className: "p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",
                                        title: "Release this task"
                                    }, React.createElement(Icon, { name: 'Trash2', size: 18 }))
                                ]),
                                
                                // Age indicator
                                React.createElement('div', {
                                    key: 'age-indicator',
                                    className: `w-3 h-3 rounded-full ${getTaskAgeColor(age)}`,
                                    title: `Task is ${age}`
                                })
                            ]));
                        })
                    ),

                    // Settings panel
                    showSettings && React.createElement('div', {
                        key: 'settings-panel',
                        className: "fixed inset-0 bg-black/50 flex items-center justify-center z-50",
                        onClick: (e) => e.target === e.currentTarget && setShowSettings(false)
                    }, React.createElement('div', {
                        className: "glass p-8 rounded-xl max-w-md w-full mx-4"
                    }, [
                        React.createElement('h3', {
                            key: 'settings-title',
                            className: "text-2xl font-light text-amber-900 mb-6 text-center"
                        }, "Settings"),
                        React.createElement('div', {
                            key: 'settings-content',
                            className: "space-y-4"
                        }, [
                            React.createElement('button', {
                                key: 'export-btn',
                                onClick: exportTasks,
                                className: "w-full wabi-button p-4 text-left"
                            }, [
                                React.createElement(Icon, { key: 'download-icon', name: 'Download', size: 20 }),
                                " Export Tasks"
                            ]),
                            React.createElement('button', {
                                key: 'new-wisdom-btn',
                                onClick: () => {
                                    setRandomWisdom();
                                    setShowSettings(false);
                                },
                                className: "w-full wabi-button p-4 text-left"
                            }, [
                                React.createElement(Icon, { key: 'sparkles-icon', name: 'Sparkles', size: 20 }),
                                " New Wisdom"
                            ])
                        ]),
                        React.createElement('button', {
                            key: 'close-settings-btn',
                            onClick: () => setShowSettings(false),
                            className: "w-full mt-6 p-3 text-amber-700 hover:text-amber-900 transition-colors"
                        }, "Close")
                    ])),

                    // Footer
                    React.createElement('footer', {
                        key: 'footer',
                        className: "mt-16 text-center"
                    }, [
                        React.createElement('p', {
                            key: 'footer-text',
                            className: "text-amber-700 italic leading-relaxed"
                        }, "Tasks age and change like seasons. Some are meant to be completed, others to be released."),
                        React.createElement('p', {
                            key: 'footer-subtitle',
                            className: "text-amber-600 text-sm mt-2"
                        }, "Honor the natural rhythm of your work."),
                        React.createElement('div', {
                            key: 'shortcuts',
                            className: "mt-6 text-xs text-amber-500"
                        }, "Shortcuts: Ctrl+N (New Task) ‚Ä¢ Ctrl+F (Focus) ‚Ä¢ Ctrl+E (End Focus)")
                    ])
                ])
            ]);
        };

        // Render the complete application
        console.log('üé® Loading full Wabi-Sabi Task Flow...');
        try {
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(React.createElement(WabiSabiTaskFlow));
            console.log('‚úÖ Wabi-Sabi Task Flow loaded successfully!');
        } catch (error) {
            console.error('‚ùå Failed to load application:', error);
            document.getElementById('root').innerHTML = `
                <div style="
                    padding: 20px; 
                    color: #dc2626; 
                    background: #fef2f2;
                    border: 1px solid #fecaca;
                    border-radius: 8px;
                    margin: 20px;
                    font-family: monospace;
                ">
                    <h2 style="margin: 0 0 10px 0; color: #991b1b;">Application Error</h2>
                    <p><strong>Error:</strong> ${error.message}</p>
                    <p><strong>Stack:</strong></p>
                    <pre style="background: #f9fafb; padding: 10px; border-radius: 4px; overflow: auto; font-size: 12px;">${error.stack}</pre>
                    <p style="margin-top: 15px; font-size: 14px; color: #6b7280;">
                        Check the browser console for more details.
                    </p>
                </div>
            `;
        }
    </script>
</body>
</html>
